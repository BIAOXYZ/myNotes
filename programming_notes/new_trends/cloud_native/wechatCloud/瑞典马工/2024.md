
# 08

基础架构部如何浪费公司资源的？ https://mp.weixin.qq.com/s/--uwaOY-qWcw7bNQDOuvYw
- > 最近《基础架构部，还有必要吗？》这篇文章大火，作者瑞典马工列举了大量基础架构部存在的问题，标题扬言不需要基础架构部。那么大部分基础架构部现状到底是样子的呢？波吉根据自己的经验，给大家简单做个分类，希望各个企业自己对号入座。
- > **折腾技术的基础架构部**
  * > 这种基础架构部通常有一个特殊的技术负责人或者 CTO 带领，然后往往这位同志本身又是个技术爱好者，并且内心深处想要打造一个比肩世界顶级（如:Google) 的基础架构团队。***他们往往是开源的爱好者，但又不一定都是真正的开源社区的贡献者，他们立志于将一些开源技术拿回公司进行魔改，美其名曰为了解决自身业务的一些场景，但是往往由于人员更迭，这些魔改的软件又无法和主流的版本进行合并，环境中就不断的残留着各种版本，对于后期接手的同学又产生了巨大的维护成本，只留下一篇在历史长河中的技术公众号文章在风中凌乱***。
  * > 当然这一类基础架构部也并非都是一无是处，如果真的能搞出一些个基础软件并且愿意回赠给上游，能够持续的进行对基础设施的迭代，也能为整个社会培养人才。***这种公司一般主流业务发展比较好，公司相对有钱，对这种爱折腾的技术架构部可以听之任之，然后一旦核心业务发生重大变化的时候，当老板意识到这一块重大成本的时候，往往也是调整的重灾区。所以反过头来就又出现了为了所谓 Job Security，有意无意的去做一些魔改，增加公司换人和接手难度***。‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍‍
  * > 举个例子：这种魔改MySQL的方案《[基于MySQL内核的SQL限流设计与实现｜得物技术](https://mp.weixin.qq.com/s/oEay2_jf5C77s_KCn-2hjA)》虽然解决了问题，但在我眼里更多的展现的是这家公司真的很有钱，同时基础架构部很爱炫技。只不过第一个苦了运维这个平台的小伙伴（要管理一个非主流的 MySQL）同时如果这位同学离开后，会发生什么。（***专业数据库公司看过后一定表示这个同学不错，待在电商公司可惜了，增加了跳槽的筹码，是后文僵尸蜗牛的初级形态***）
    >> 【[ :star: ][`*`]】 //notes：上个那个公众号文章真就是一个典型的没事瞎折腾的例子：要做 SQL 限流，在数据库外围做不是更好吗？按文章里的构架，没限流前所有 SQL 都要进数据库的 SQL 引擎的。此外，除了 SQL 引擎层的消耗，这些本来不该被执行的 SQL 都得连上数据库，数据库的连接（池）资源更宝贵吧。——***所以其实就是找个理由锻炼自己的技术，但是坑的是接手的人***。
  * > 但是波吉也遇到过创业团队的 CTO 不跑核心业务的 MVP 验证，上来就搞所谓的各种基础设施（最近的部分 AI 创业团队这种现象也不少），***结果各种数据库，监控，大数据平台搞了一堆，核心的应用却搞不出来或者没办法快速做商业化验证***。最后 CEO 请得所谓技术大神就成了这个创业公司的掘墓人。比如有一位朋友融资能烧一年的钱，做了一个类似 Spring Cloud 的开发框架，花了九个月，然后他们的核心业务是做教育 APP。当然最终结果是 CEO 和 CTO 吵翻，CTO 愤愤的表示 CEO 不尊重技术。
- > **幻想商业化的基础架构部**
  * > 折腾技术的基础架构部有一个很有趣的进阶版本，就是发现当自己的“得意”作品在内部看起来用得不错的时候，自然而然就想对外输出，当然对外输出的有两种情况：
    + > 一种是成立云计算公司，以云计算平台的方式提供服务，让基础架构部不仅仅是公司的基础架构部，还能成为全国的，甚至世界的基础架构部。然后要从市场上获得认可，进入到市场竞争中，这就完全不一样了。如果没有公司真的把这一块作为核心业务，持续的投入烧钱，包括领导者是否真的获得了 CEO 和董事会对这个方向上的认可，那注定是南柯一梦。《滴滴如何基于开源引擎，打造自主可控服务体系》
    + > 第二种是把基础架构部把自己的得意产品单体出来商业化，当然路径很多，比如捐给 Apache 基金会，再出来基于这个开源做成商业公司。或者直接拿自己在前任公司的某个东西出来商业化。这条路径上百度应该是中国的翘楚。确实对于公司本身来说，当基础架构的供养成本太高的时候，用这种方式解决一下人力成本问题，也不失为一种比较好的办法。
  * > 还是那句话，如果这种商业化是公司本身的战略方向没有问题，如果是创业公司请到了这种给自己留后路的团队，这不禁让我想起了寄生到蜗牛的双盘吸虫，让蜗牛变成了僵尸蜗牛，所有的业务融资就是为了养活这个寄生虫而已。《做美丽的僵尸蜗牛》
- > **购买服务的基础架构部**
- > **其实是运维的基础架构部**
  * > 还有一种基础架构部，其实可能就叫运维部，他们往往在公司内部的地位其实是不高的，业务同学不管用服务还是用自己构建的开源软件都无需这个团队统一，他们只是把业务上线的系统管理起来，运维起来，往往视角也大部分集中在主机这个层面，本身这个团队也不一定受公司重视。
  * > 其实这就相当于没有基础架构部的状态，业务团队开始无限增生各种各样的基础设施，基础软件，有的用云，有的自己搭 IDC，有的自己搭数据库，有的用 RDS 服务，乱七八糟。
  * > 当然如果这个客户是云计算用户，通常是云厂商最喜欢的，业务研发刷刷刷的开服务花钱，大量的浪费，完全控制不住。如果是线下 IDC 的情况则是不管是管理成本，还是安全风险都巨大，而且缺乏统一管理性，导致管理成本奇高。

# 07

基础架构部，还有必要吗？ https://mp.weixin.qq.com/s/yalmoDbY75_Pz9PCzpjiPQ
- > **没有核心技术**
  * > 基础架构部年终 PPT 最喜欢强调的就是自己打造了 X，Y，Z平台，为业务单元提供了大数据/运维/可观测性/安全加固能通用能力。
  * > 有些基础架构部的技术大师，还会嘲笑业务单元的开发者是 CRUD 码农，很以自己的技术积累自豪。
  * > 但是打开这些高大上的中台一看，你就会发现，***基础架构部的技术大神们其实就是一群开源软件组装老师傅***。他们的主要工作就是上 github 找到开源软件X1， X2 和 X3，跑一些莫名其妙的 benchmark，然后选型一个，在自己的机房部署一套。这个过程中，老实人就直接部署社区版本，自己把参数调一调；聪明人就魔改一个，让别人接手不了；更聪明的就仿造一个，让别人根本不想接手。***我分别称之为`调参师傅`，`魔改师傅`和`仿造师傅`***。
- > **无法交付业务价值**
  * > 过去几年，大数据老师傅玩调参/魔改/仿造这一套最熟练了。最开始大家都用 Hadoop。基础架构部找几个人比较一下 Impala 和 Presto，或者给 Spark streaming 和 Storm 做个测评，就对 CTO 宣称自己掌握了大数据技术，开始建设大数据中台。拿到了预算，闷头干一年，你发现老哥们就做了 web 界面，美其名曰《统一大数据管理平台》。申请到人头多的，还会顺手做一个用户管理平台，结果连个 SSO 都不支持。
  * > 过了几年，当整个 Hadoop 生态被欧美抛弃之后，这些老师傅又开始抓住 Clickhouse 这个救生艇。同样的手法又来一遍。老实人就老实的说“我们部署了若干套Clickhouse”；不老实的就魔改一个Clickhouse，也不管上游兼容不兼容；滑头的就干脆对着 Clickhouse 仿一个。
  * > 现在，业界大数据发展到下一阶段，以 Snowflake/BigQuery/Athena为代表的大数据平台，特别强调易用性，从全流程上降低数据的使用门槛，尽量把更多的公司员工发展为大数据用户，最大化的把数据变现。***但是他们都是云服务，而不是开源软件，你就看到老师傅们根本玩不转了***。

多云战略：无奈的现实，危险的选择 https://mp.weixin.qq.com/s/s_ggIlghoHCwtT5l6wqGiQ
- > 很多从业者有一种很朴素的认知：大企业都应该选择多云。如果你的企业是世界五百强，采购部门定期的让多家云厂商来竞标，谁的报价更有竞争力，就多给它一些采购份额，这样不仅能提升供应链的韧性，也有利于商务谈判。
- > 如果不考虑云平台的巨大粘性，这个想法是很有道理的。但实际上，这不是普遍做法。***据我所知，没有任何一家大企业在AWS，Azure 和 GCP之间这么做。原因非常直接：在云平台之间迁移的成本太高了***。
- > **云迁移不可行**
  * > 我本人做过一个云平台迁移项目。由于一个零售业合作伙伴不信任亚马逊公司，要求我们把系统从 AWS 迁移到 Azure，以避免亚马逊窥探其数据。对非工程师来说，这听上去是一个非常，非常，非常合理的要求，但实际上，这个需求是不可落地的。
  * > 举例来说，Azure 并没有 Elastic Container Service 服务，所以我们不得不组建一个 Kubernetes 专家团队。即使应用开发者重构代码，Azure 的 CosmosDB 也无法替换 DynamoDB。Azure 的用户权限管理和网络，在模型上就和 AWS 差别巨大，我们在之上构建的合规性和网络安全需要彻底重建。再加上其他服务，最终项目处于这么一个境地：由数据合规驱动的项目，在付出高昂的工程师时间成本之后，反而让系统的合规性下降到不可接受的程度。
  * > 我在去年写过一篇文章《多云操作系统：一种幻想》，在理论上对这个失败项目做过总结。 <br> `目前整个行业没有一个关于云服务产品的RFC，更不用说国际标准。短时间内期望厂商们协商出一个Cloud POSIX，是不现实的。从实务角度看，把一朵云当做一个操作系统，轻易不要迁移，迁移则改造应用，听上去很不酷，但是是目前的最佳选择。`
- > **实际存在的多云**
  * > ***工程领域的真理之一就是：<ins>理论上最不合理的设置，一定在现实中存在。理论上最合理的设置，一定在现实中不存在</ins>***。
    >> //notes：OSI七层模型：？？？
  * > 尽管多云成本巨大收益微小，实际上，不少公司有意无意的采用了多云战略。大概可以分类为
    ```console
    1.收购/合并引起的多云
    2.集团下每个bu有独立技术决策权
    3.混用不同云的不同服务。比如web service放aws，olap放bigquery。
    4.外包公司
    5.把云当 IDC 用的公司
    ```
- 回复：
  * > B站其实主要是自建IDC 而不是用云 云的占比其实并不大 核心业务其实基本不在云上 云上跑了什么我就不在这里说了。 至于那个LB的事情 并不能佐证你的观点的 你并不了解B站iaas层和paas层的架构。
  * > 只能说你一直没碰过高并发业务。
    >> 高并发是我用来鉴别伪架构师的试金石。在云计算年代还在津津乐道高并发的，都是伪专家
    >>> 质量，成本，可维护性，小体量低并发业务对这些指标敏感度低，服务挂一会也无所谓，一年也花不了几个钱，all in one爱咋咋。像博主公司基础组件维护的能力都没多少，基本都是去使用昂贵的paas服务，并且业务代码还跟云强耦合，这要是在大厂得疯了，迁移还需要业务研发大量成本。单一云挂了就等死吧，没有任何逃生能力，也没有啥议价权。大体量高并发场景(无自有云平台)那考虑的因素就多了必然要找合适自己路，idc+多云保障，有基建团队，有业务团队，分工明确，才能保障业务，毕竟每一分钟都是钱，随便一个多云的谈判可能就是几千万过亿的成本优化，可能替换个公有云的PAAS服务，就能省几个小目标。小体量低并发的就别蹭别人热度了，还b站这不行那不行，人家一个月cdn的成本可能就是你n年成本
    >>>> 笑死。B 站连个负载均衡都维护不了，还谈什么基建团队 你们说的这一套，都是继承自十几年前的 bat。早就应该被淘汰了
    >>>>> 笑死，出故障＝维护不了，那aws直接关店吧。你新写的东西更搞笑，怪不得只能在国外混
  * > ***我司现在就是云供应商锁定的受害者，我司之前用了全套微软的技术栈，Windows + .net + mssql，自然而然选择了Azure，即便是现在做到容器化，容器还得用Windows container，目前微软坐地起价，要求我司的Azure云使用量要和我司股价匹配增长。目前我们正想办法把新业务转移到aws***
    >> 哥们在微信聊天框给我发个消息，我们加个微信聊聊？
    >>> 所谓云使用量要和营收增长相匹配，就是之前消费满1000万就给打8折，现在要消费满5000万才能打折，问就是要求云使用量要和营收增长相匹配
    >>>> 说错了不是股价，是营收
  * > 这文章就太水了，而且暴露了见识少

# 06

二十年目睹软件怪现状：性学家，化学家和哲理家 https://mp.weixin.qq.com/s/2gfSLOYl8GGpUTF6Gptb0w
- > 第一篇要谈一谈软件行业的废话文学家。废话文学家就像一个个劣质的大语言模型，不管你用的什么提示词，他总可以接上话，但是不会给你有用的内容。
- > 为了研究的方便，瑞典马工把废话文学家再细分为几类，分别是：性学家，化学家，辩证哲理家。
- > **性学家**
  * > 性学家每天在办公室里无所事事，时不时的就开会谈性。每次谈资都是一样的模版：“我们这个系统啊，一定要保障可靠性，维护安全性，提供扩展性，不能丢掉兼容性，还要顾及易用性。”
  * > 然后性学家就开始分发性学帽子，让张三负责安全性，请李四镇守稳定性，派王五麻子掌管合规性，张三李四王五各自咬破手指头，当面签署血色军令状，性学家就完成技术架构了，班师回朝！
- > **化学家**
  * > 如上所述，张三李四王五麻子从性学家那里领了性学课题，自然要有个交代。这时候他们往往就变身为化学家。
  * > 化学家，顾名思义，用的武器就是“化”，什么都可以“化”一下。比如你说一个词“开发”，那化学家就会接上：“这个开发啊，必须要规范化，质量化，敏捷化，标准化，系统化。”
  * > 你说一个词“平台工程”，化学家就会插嘴：“这个平台工程啊，其本质就是平台化，集中化，规范化。平台工程要落地呢，我看必须系统化，流程化，规范化。”

# 04

云计算：菜就是一种原罪 https://mp.weixin.qq.com/s/iKg7DbuRCzh7vORXfdyndA

# 03

HashiCorp 重新定义开源 https://mp.weixin.qq.com/s/zjNouic6OeC5bTCHuRAkCQ
- > 当地时间 8 月 10 日，知名开源软件公司 HashiCorp 发布一则公告，称其原先在 Mozilla Public License 2.0 下发布的 Terraform、Consul 和 Vault 等多款软件，将在未来的版本中改为使用商业源码协议，即 Business Source License 1.1 来发布。
- > **什么是商业源码协议**
  * > 商业源码协议是 Business Source License 的逐词翻译，常被简称为 BSL 协议或 BuSL 协议，当前版本是 1.1 版本。
