
为什么 MAC 地址不需要全球唯一 https://draveness.me/whys-the-design-non-unique-mac-address/
- > **局域网通信**
  * > 所有的计算机和终端设备都需要通过网络适配器连接到局域网中，每一个适配器都有唯一的链路层地址，也被叫做 LAN 地址或者 MAC 地址，MAC 地址被设计成了扁平结构，它们不会随着所处网络的不同而发生改变。
  * > 当设备的网络适配器想要向其他的适配器发送数据帧时，它会将目的适配器的 MAC 地址插入到如下所示的以太网帧中，每个以太网帧都与 IP 数据报类似，包含源地址和目标地址，只是以太网帧中的地址是 MAC 地址，而 IP 数据报中的地址是 IP 地址：
  * > 局域网中的数据传输不是通过网络层的 IP 地址进行路由和转发的，然而 IP 地址一般都是发送数据主机知道的唯一信息，想要在局域网中发送数据，还是需要知道它们的 MAC 地址。当我们的设备想要向其他的设备发送数据时，它会先通过 ***`ARP`(`Address Resolution Protocol`，`地址解析协议`)*** 在局域网中获取目的 IP 地址对应的 MAC 地址：
    + > 1.源主机会向当前局域网中发送 ARP 请求，目标的 MAC 地址是 FF-FF-FF-FF-FF-FF，这表示当前请求是一个广播请求，局域网内的所有设备都会收到该请求；
    + > 2.接收到 ARP 请求的主机都会检查目的 IP 和自己的 IP 地址是否一致；
      - > 如果 IP 地址不一致，主机会忽略当前的 ARP 请求；
      - > 如果 IP 地址一致，主机会直接向源主机发送 ARP 响应；
    + > 3.源主机在接收到 ARP 的响应之后，会更新本地的缓存表并继续向目的主机发送数据。
- > 在局域网中我们一般会使用集线器（Hub）或者交换机（Switch）来连接不同的网络设备。***因为在集线器连接的局域网中，所有的数据帧都会被广播给局域网内的全部主机，所以使用相同的 MAC 地址一般也不会出现太多的问题；但是交换机会学习局域网中不同设备的 MAC 地址并将数据帧转发给特定主机，所以如果局域网是由交换机构成的，就会影响网络的通信***。
  * > 假设局域网中的具有两台 MAC 地址完全相同的网络设备 A 和 B，即 `6e:77:0f:b8:8b:6b`，当设备 A 想要向设备 B 发送以太网帧时会遇到如下所示的情况：
    + > 1.设备 A 在构造的以太网帧中将源地址和目的地址都设置为 `6e:77:0f:b8:8b:6b` 并向交换机发送数据；
    + > 2.交换机接收到了设备 A 发送的数据帧后，会从数据帧的源地址学习到设备 A 的 MAC 地址并将 `6e:77:0f:b8:8b:6b -> A` 这条记录插入本地缓存中；
    + > 3.交换机发现收到数据帧的目的地址会指向了网络设备 A，所以它会将该数据转发回 A；
  * > 因为交换机的 MAC 地址学习策略，所以我们不能在同一个局域网中使用相同的 MAC 地址，但是因为 MAC 地址是链路层网络中的概念，跨局域网的网络传输需要通过网络层的 IP 协议，所以在不同的局域网中使用相同的 MAC 地址就不存在类似的问题了。
