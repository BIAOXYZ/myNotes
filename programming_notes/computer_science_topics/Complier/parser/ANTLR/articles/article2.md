
# 1

关于SQL解析，为何编程语言解析器ANTLR更胜一筹？ https://juejin.cn/post/6844903699060359176 || https://dbaplus.cn/news-155-2261-1.html
- > **一、概念**
  * > 1、词法解析 
    + > ***<ins>词法解析器每次读取一个字符，在当前字符与之前的字符所属分类不一致时，即完成一个词法单元的识别</ins>***。例如，读取SELECT时，第一个字符是’S’，满足关键字和标示符的规则，第二个字符’E’也同样满足，以此类推，直到第7个字符是空格时，则不满足该规则，那么就完成了一个词法单元的识别。***SELECT既是SQL规范定义的关键字，又同时满足标识符规则，因此当一个词法单元是标识符时，解析器需要有优先级的判断，需要先确定它是否为关键字***。其他的规则相对简单，如：以数字开头的字符则根据数值规则的字面量读取字符；以双引号或单引号开头的则根据字符串规则的字面量读取字符；运算符或分界符就更易识别。举例说明，以下SQL： 
      ```sql
      SELECT id, name FROM product WHERE id > 10;
      ```
    + > 识别之后的词法单元为：
      ```console
      关键字：SELECT、FROM、WHERE
      标识符：id、name、product
      字面量：10
      运算符：>
      分界符：,和;
      ```
  * > 2、语法解析
    + > 语法解析器每次从词法解析器中获取一个词法单元。如果满足规则，则继续下一个词法单元的提取和匹配，直至字符串结束；若不满足规则，便提示错误并结束本次解析。
    + > 语法解析难点在于规则的循环处理以及分支选择，还有递归调用和复杂的计算表达式等。

# 2

Parser 解析重写 SQL https://www.victorchu.info/posts/c3d08049/
- > **SQL 解析**
  * > 一般来说，一个 parser（也称编译器前端）会由两部分组成：
    + > `词法分析器`（lexer/scanner/tokenizer）
    + > `语法解析器`（parser）
  * > 在解释代码的时候，先由词法解释器将代码段转化成一个一个的词组流（token），再交由解释器对词组流进行语法解释，转化为对应语法的抽象解释，即是 AST 了。我们举个例子来进行说明上述的过程：
    ```console
    437 + 734
    ```
  * > 在 parser 解析如上的计算表达式时，***词法分析器首先依次扫描到 “4”、“3”、“7” 直到一个空白符，这时，词法分析器便将之前扫描到的数字组成一个类型为 “NUM” 的词符（token）***；接下来，词法分析器继续向下扫描，扫描到了一个 “+”，对应输出一个类型为 “PLUS” 的词符（token）；最后，扫描 “7”、“3”、“4” 输出另一个类型为 “NUM” 的词组（token）。
  * > 语法解释器在拿到词法分析器输出的词符流后，根据词组流的 “NUM”，“PLUS”，“NUM” 的排列顺序，解析成为加法表达式语法树。
  * > 在拿到 AST 抽象语法树后。我们就可以对其做更多处理，例如，分析元信息，优化执行逻辑或执行表达式等处理。
- > **Parser 的使用**
  * > 上面是一个关于编译器前端的简单介绍，更多的描述可以参考《编译原理》。接下来就是介绍下如何来使用 Parser。最常见的 Parser 应用场景有 JSON 解析，SQL 解析等。这里我们以 JSON 解析为例，介绍下 Parser 的使用方式。
