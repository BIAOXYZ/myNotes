
# gcc问题

为什么Clang不能取代GCC？ - Betty的回答 - 知乎 https://www.zhihu.com/question/602844208/answer/3162684368
- 回复：
  * > 查代码提bug！我就遇到过gcc8一个内置函数返回值是随机的，查了源代码发现作者没写return！所以调用者得到的值是当前寄存器的随机值
  * > while，for的括号里写co_await，lambda同时也是一个awaitable函数，都会报幺蛾子错误，如果不报，则运行时出幺蛾子结果。gcc在协程上一堆bug！！！
    >> 还有各种莫名其妙的变量错误被提前析构的问题
    >>> 我遇到了一个构造和析构对不上的问题，如果co_await的对象构造函数有lambda，这个lamba值捕获一个对象，这个对象将会多一次析构，没分析出来哪里的问题
    >>>> 就是gcc的bug，你试试clang和msvc，绝对没问题
    >>>>> 确实是gcc的问题，clang下面是正常的
    >>>>>> 是编译器代码的问题，你看我这个链接下的分析 https://gcc.gnu.org/bugzilla/show_bug.cgi?id=109283
    >>>>>>> 我也遇到了 简直一模一样
  * > 这个 bug 存在好久了，就是那段代码写拉了 https://gcc.gnu.org/bugzilla/show_bug.cgi?id=107288 <br> 103909, 104384, 107288 都是
    >> 我后来就不用 gcc 的协程功能了
  * > 10年前我用 ANSI C 语言自定义的无栈协程，到现在任何编译器都正常工作。
    >> 这么厉害。大佬，有开源吗
    >>> 协程的概念几十年前就有了。 你照这个帖子自己做一遍就是了，极其简单。 https://www.chiark.greenend.org.uk/~sgtatham/coroutines.html
    >>>> 写法上怎么解决上下文变量优雅访问的？
    >>>>> 无法像 javascript的 await 那样优雅， 能实现功能，但是肯定不那么”优雅“。 nginx 的写法很优雅吗？ 实用
    >>>>>> 就是程序主动切下csip 最开始看到实现是云风的版本 确实是十几二十年前的东西了。
    >>>>>>> 云凤那个是有栈协程。 我前面发的老外帖子里的是无栈协程。
  * > gcc lambda + co_await 也是一堆bug。最近的gcc 13好多了
    >> 每次自己编译后make test总有十个二十个预期外的Case过不了，这样的编译器还能放心用吗？
  * > 腾讯还有这么进步的组吗，以为大多是11和14
  * > 类似的还有，`A=func()+100;` 100加不上，拆开成两行就行了
