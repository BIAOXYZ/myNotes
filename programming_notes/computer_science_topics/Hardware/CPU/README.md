
# CPU general

服务器中的u是什么意思 http://blog.chinaunix.net/uid-21505614-id-289333.html
> U是服务器机箱的高度，1U等于4.45厘米
>
> 那3U就是3x4.5CM了。“U”是一种表示机架式服务器外部尺寸的单位，是unit的缩略语，详细尺寸由作为业界团体的美国电子工业协会（EIA）决定。 之所以要规定服务器的尺寸，是为了使服务器保持适当的尺寸以便放在铁质或铝质机架上。机架上有固定服务器的螺孔，将它与服务器的螺孔对好，用螺丝加以固定。 

别傻了！双核和双路服务器根本不一样 http://server.zol.com.cn/691/6916680.html
> 服务器术语里，大家经常会听到`1U`、`2U`，`单路`、`双路`，`机架式`、`塔式`及`刀片式`等常用名词。其中，机架式、塔式及刀片式是指服务器的外形，U是指服务器的高度，路是指服务器的处理器数量。
>
> 部分朋友会问，我听说过双核服务器，双核服务器和双路服务器不是一回事吗？笔者在这很严肃地告诉您：双核和双路服务器不仅不是一回事，而且二者完全没有可比性！二者唯一有联系的就是，都和服务器的处理器有关。
>
> 无论是单路、双路、四路甚至是八路服务器，其中的“路”都是指**服务器物理CPU的数量**，再直观点就是**服务器主板上有几个CPU插槽**，有几个就是几路，双路自然指该服务器支持两颗物理CPU。
>
> 至于双核服务器，和双路完全是两码事，**双核服务器是指在一颗物理CPU里装了两个CPU核心**，这样做的好处就是服务器厂商可在尽可能不增加成本的前提下，提供给服务器更强的性能，对企业控制运营成本也是一件好事。
>
> 这样说的话是不是意味着双核服务器比双路更好？不，其实二者并不是一类属性，不存在直接对比关系。双核服务器可以是单路，可以是双路（目前很少双路服务器是双核的）；双路服务器可以是四核，也可以是八核。不管是双核还是双路，其最终目的都是为了提高服务器的性能。
> 
> 在这里笔者要重点说下双路服务器，双路服务器在服务器市场还是蛮受欢迎的，企业在选购服务器时，重点考虑的还是价格和性能问题。单路服务器几乎没有升级空间，随着业务发展，两年左右就得更换，四路及以上服务器采购费用不菲，升级难度也比较大，并不适合时刻需要考虑运营成本的中小企业。相比单路服务器，双路服务器性能更好，升级空间也较大；相比四路服务器，双路服务器价格低廉，性能不会造成浪费，适用于大多数中小型企业。

2u四路服务器 和 2u四节点服务器 一样吗? - 知乎 https://www.zhihu.com/question/24334689

关于“数据中心”的最强入门科普 https://www.ithome.com/0/605/443.htm
- > **▲ 服务器机架**
  * > 一个常见标准机架，高度尺寸通常是 42U。U 是一种表示服务器外部尺寸的单位，是 unit 的缩略语，1U 等于 4.445cm。机架宽度的话，有 600mm 或 800mm。
  * > 机架的深度有很多种，包括 600mm、800mm、900mm、1000mm、1200mm 等。通常来说，IT 设备（服务器）机架的深度更深（1100mm 或 1200mm），而通信设备的深度会浅一些（600mm）。

IBM 的 POWER 处理器的架构比 X86 强吗？ - 知乎 https://www.zhihu.com/question/22587769

What is the impact of running the CPU at 100% for long periods at a time? [duplicate] https://superuser.com/questions/431309/what-is-the-impact-of-running-the-cpu-at-100-for-long-periods-at-a-time

# 多核相关

多核 CPU 和多个 CPU 有何区别？ - 知乎 https://www.zhihu.com/question/20998226
- 多核 CPU 和多个 CPU 有何区别？ - 老狼的回答 - 知乎 https://www.zhihu.com/question/20998226/answer/705020723
  * > 先说结论，多核CPU和多CPU的区别主要在于性能和成本。多核CPU性能最好，但成本最高；多CPU成本小，便宜，但性能相对较差。我们来看一个例子：如果我们需要组成一个48核的计算机，我们可以有这么三种选择：
    + > 1.把48个核全部做到一个大Die上，Die很大。这个Die加上一些外围电路组成一个单Die多核CPU。
    + > 2.弄4个小Die，每个Die 12个内核，每个Die很小。把这4个Die，加上互联总线和外围电路，全部封装（Packaging）到一个多Die多核CPU中。
    + > 3.还是弄4个Die，每个Die 12个内核，每个Die很小。每个Die加上外围电路封装成一个单独的CPU，4个CPU再通过总线组成一个多路(way/socket)系统。
  * > 我们来看看他们的性能差距和成本差距。
- 多核 CPU 和多个 CPU 有何区别？ - 木头龙的回答 - 知乎 https://www.zhihu.com/question/20998226/answer/675604354

【[:ok:][:star:][`*`]】 什么是CPU Die？ - 河马的文章 - 知乎 https://zhuanlan.zhihu.com/p/51354994 || https://blog.csdn.net/lindahui2008/article/details/84696838
- > 在看CPU相关的手册的时候，经常会看到Die的字样，刚开始不太理解是什么意思，感觉有点像是一颗CPU芯片，但是这样理解还是不够准确。后来各种查找，终于找到了Die的准确意思，原来Die是处理器在生产过程中引入的概念。
- > 总的来说，***`Die`或者`CPU Die`指的是处理器在生产过程中，从`晶圆`（`Silicon Wafer`）上切割下来的一个个小方块（这也是为啥消费者看到的CPU芯片为什么都是方的的原因）***，在切割下来之前，每个小方块（Die）都需要经过各种加工，将电路逻辑刻到该Die上面。
  * > 为什么晶圆是圆的，这主要是由于晶圆的制作工艺决定的，可以参考文章： <br> 为什么晶圆都是圆的不是方的？ - 老狼的文章 - 知乎 https://zhuanlan.zhihu.com/p/30513730
  * > 而为什么切割出来的Die是方的，主要是为了切割方便，并且最大利用Die的面积。理论上，只要晶圆做得足够大，Die的面积足够小，晶圆的利用率就可以无限接近100%。
- > 对于主流的CPU厂商Intel和AMD而言，***他们会将`1个`或者`N个`CPU Die封装起来形成一个`CPU Package`，有时候也叫作`CPU Socket`***，如下图所示： ![](https://pic3.zhimg.com/80/v2-c43566675e30ce8f5262c15c907a8462_1440w.jpg)
- > 由于CPU Die的制作工艺及其复杂，导致CPU Die的大小会很大地影响到CPU Die的良品率，***即CPU Die的大小越大，则CPU Die出错的概率越高，良品率也越低，相应的成本也越高***。
- > 在服务器领域，`Intel Xeon`系列的高端处理器会尽量地将整个CPU Socket做到一个CPU Die上，导致其相应的CPU Die的大小都比较大，这也是其价格昂贵的一个原因。***将整个CPU Socket上的东西都做到一个CPU Die上的好处是CPU内部之间各个组件的连接是通过`片内总线`互联，有更多的资源可以相互共享，这样整体的性能能够更高***。
- > 而对于AMD的`EYPC CPU`而言，***它的每个CPU Socket由`4个`CPU Die组成，每个CPU Die中包含有`4个`CPU内核***，如下图所示： ![](https://pic2.zhimg.com/80/v2-51baf477232ec9265d7616fa84b83175_1440w.jpg)
- > CPU Die之间通过`片外总线`（`Infinity Fabric`）互联，***并且不同CPU Die上的CPU内核不能共享CPU缓存，而单个Die的Xeon处理器内和所有CPU内核其实是可以共享CPU的第三级缓存（L3 Cache）的***。
- > 我想，这种CPU Die的分布应该也是导致EPCY处理器和Xeon处理器虽然在单核上的性能可能相差不多，但是总体性能赶不上Xeon处理器的一个原因。但是这样也有个好处，就是可以降低成本。

# SMP

对称多处理 https://zh.wikipedia.org/wiki/%E5%AF%B9%E7%A7%B0%E5%A4%9A%E5%A4%84%E7%90%86
- > 对称多处理（英语：Symmetric multiprocessing，缩写为 SMP），也译为均衡多处理、对称性多重处理、对称多处理机，是一种多处理器的电脑硬件架构，在对称多处理架构下，每个处理器的地位都是平等的，对资源的使用权限相同。现代多数的多处理器系统，都采用对称多处理架构，也被称为对称多处理系统（Symmetric multiprocessing system）。在这个系统中，拥有超过一个以上的处理器，这些处理器都连接到同一个共享的主存上，并由单一操作系统来控制。在多核心处理器的例子中，对称多处理架构，将每一个核心都当成是独立的处理器。
- > 在对称多处理系统上，在操作系统的支持下，无论行程是处于用户空间，或是核心空间，都可以分配到任何一个处理器上运行。因此，行程可以在不同的处理器间移动，达到负载平衡，使系统的效率提升。
- > 在计算领域，对称多处理是一种多处理机硬件架构，有两个或更多的相同的处理机（处理器）共享同一主存，由一个操作系统控制。当前最常见的多处理机系统使用了对称多处理架构。以多核处理器为例，对称多处理架构就是这些核，它把这些核当作不同的处理器。不同的处理器之间可以由总线、矩阵开关或片上mesh网络来连接。使用总线或矩阵开关的对称多处理架构有可扩展性方面的瓶颈，它是由处理器之间连接的带宽、能耗，以及内存和磁盘阵列等引起的。使用mesh连接的架构避免了这些瓶颈。它能够支持更多数量的处理器，具有几乎线性的可扩展性，代价是牺牲可编程性。
- > 优点是并发度很高，但是由于系统总线的带宽是有限的，故处理器数目受限，且性能受限。

对称多处理 https://baike.baidu.com/item/%E5%AF%B9%E7%A7%B0%E5%A4%9A%E5%A4%84%E7%90%86/6274908
- > 对称多处理"（Symmetrical Multi-Processing）简称SMP，是指在一个计算机上汇集了一组处理器(多CPU),各CPU之间共享内存子系统以及总线结构。它是相对非对称多处理技术而言的、应用十分广泛的并行技术。
- > 在这种架构中，一台电脑不再由单个CPU组成，而同时由多个处理器运行操作系统的单一复本，并共享内存和一台计算机的其他资源。虽然同时使用多个CPU，但是从管理的角度来看，它们的表现就像一台单机一样。系统将任务队列对称地分布于多个CPU之上，从而极大地提高了整个系统的数据处理能力。所有的处理器都可以平等地访问内存、I/O和外部中断。在对称多处理系统中，系统资源被系统中所有CPU共享，工作负载能够均匀地分配到所有可用处理器之上。
- > 我们平时所说的双CPU系统，实际上是对称多处理系统中最常见的一种，通常称为"2路对称多处理"，它在普通的商业、家庭应用之中并没有太多实际用途，但在专业制作，如3DMax Studio、Photoshop等软件应用中获得了非常良好的性能表现，是组建廉价工作站的良好伙伴。随着用户应用水平的提高，只使用单个的处理器确实已经很难满足实际应用的需求，因而各服务器厂商纷纷通过采用对称多处理系统来解决这一矛盾。在国内市场上这类机型的处理器一般以4个或8个为主，有少数是16个处理器。但是一般来讲，SMP结构的机器可扩展性较差，很难做到100个以上多处理器，常规的一般是8个到16个，不过这对于多数的用户来说已经够用了。这种机器的好处在于它的使用方式和微机或工作站的区别不大，编程的变化相对来说比较小，原来用微机工作站编写的程序如果要移植到SMP机器上使用，改动起来也相对比较容易。SMP结构的机型可用性比较差。因为4个或8个处理器共享一个操作系统和一个存储器，一旦操作系统出现了问题，整个机器就完全瘫痪掉了。而且由于这个机器的可扩展性较差，不容易保护用户的投资。但是这类机型技术比较成熟，相应的软件也比较多，因此国内市场上推出的并行机大量都是这一种。PC服务器中最常见的对称多处理系统通常采用2路、4路、6路或8路处理器。UNIX服务器可支持最多64个CPU的系统，如Sun公司的产品Enterprise 10000。SMP系统中最关键的技术是如何更好地解决多个处理器的相互通讯和协调问题。

# NUMA

Linux 内核 101：NUMA架构 - 廖长江的文章 - 知乎 https://zhuanlan.zhihu.com/p/62795773
- > **一句话**
  * > NUMA 指的是针对某个 CPU，内存访问的距离和时间是不一样的。是为了解决多 CPU 系统下共享 BUS 带来的性能问题。（这句话可能不太严谨，不是为了解决，而是事实上解决了。）
- > **NUMA 架构图**
  * > 从最简单的开始，一个 CPU（注意：这里指的是物理 CPU，不是核。需要注意的一点是NUMA 是针对多物理 CPU 而言的，而不是多核。），通过 bus 和 RAM 相连。
  * > 接下来多CPU 出现了（再说一次，不是多核单CPU！），如果还是像之前那样将所有的CPU 通过一个 BUS 和 RAM 相连，BUS 会成为性能的杀手。而且，加的 CPU 越多，性能损耗会越高。
  * > 这时候 NUMA 架构就展露身手了：通过把 CPU 和临近的 RAM 当做一个 node，CPU 会优先访问距离近的 RAM。同时，CPU 直接有一个快速通道连接，所以 每个CPU 还是访问到所有的 RAM 位置（只是速度会有差异）。
