
# 08

Windows 是MySQL和PostgreSQL高性能数据库的坟墓 https://mp.weixin.qq.com/s/TlYG4K8Z3QsUyp4lrsLlcQ

# 06

SQL SERVER 2022 针对缓存扫描和Query Store 的进步，可以考虑进行版本升级 https://mp.weixin.qq.com/s/KghrpYL9QsN_LmpmrJLCqw
- > 最近不知道做对了什么，上篇SQL SERVER 的文章竟然疯狂了，5000多的阅读量并且还在增长，比MYSQL ,POSTGRESQL ,POLARDB ,MONGODB ,或者其他的数据库都要多，WHY .看来关注SQL SERVER 的人真是不少，之前我一直错觉，SQL SERVER 关注得人不多了。
- > 这次我们说说SQL SERVER中一直被人诟病的问题，缓冲池扫描的问题，我们都知道SQL SERVER 是8KB的页面，***这里除了蹩脚的MySQL 是16KB*** ，其他的数据库都是8KB页面，PG默认也是8KB，但是在数据库重启，或者关闭后，在开机后，SQL SERVER 有一个问题，就是缓冲池扫描的问题。
- > 其他的数据库都有自己的一些解决方案，包含部分开源的数据库产品，但SQL SERVER 作为一个商业数据库产品，在2022之前有民间方案，但称之为成熟的方案没有。***随着一些业务的变大，一些SQL SERVER 本身具有128G 或者更大的内存，我见过的是最大的是768GB内存的SQL SERVER 。<ins>这些大内存的主机在重启后，将磁盘的数据重新灌入到内存中，是有一个缓慢的过程的</ins>，我们称之为 缓冲池扫描***。
- > 这也就是一直在SQL SERVER 重启后，被诟病的第一次查询会比价慢，以及我们之前有一些同学撰写的 ，开机后的预热脚本（真的有人这样做，比较有意思，将常用的查询，写长脚本在系统重启后，运行这个脚本加速数据的读入到内存） 但是在SQL SERVER 2022 版本解决了这个问题，他提供 了并行缓冲扫描来解决这个问题，这个增强的缓冲池是利用了多个CPU技术，并行进行数据的扫描，新的技术中为每800万个缓冲区，相当与64G的内存分配一个任务，如果缓冲池少于800万，则还是使用串行扫描。同时2016SP3 2017CU23 ,2019CU9版本的中对于缓冲池扫描事件的添加，让SQL SERVER 用户可以通过Extended events ,可以出发分析buffer pool scan 的问题，设置相关的出发值，来分析问题,这就是因为这个问题在2022版本中添加这个事件的发现来找到系统的性能问题。
