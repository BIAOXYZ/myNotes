
[Python]切片完全指南(语法篇) https://zhuanlan.zhihu.com/p/79541418
- > **基本索引**
  * > 我们从Python的基本索引开始，即**单个整数**的索引。假设被索引的序列仍为之前提到的 `a`，则基本索引的语法为 `a[index]`，其中 `index` 为下标。读者可能会觉得这里过于简单，但我们要强调的是Python一个语法糖：**负数下标**索引，即：`index` 可以取为负数，当其为 `-n` 时，对倒数第 `n` 个元素进行索引。我们用一张表格值观展示 `a` 的索引范围。
  * > ![](https://pic4.zhimg.com/80/v2-ecb0b9ef110c07e9bfb31bf496396e7b_1440w.png)
  * > 非负下标索引和负数下标索引共同构成了Python索引的**有效范围**。有效范围的概念对切片的理解非常重要，在基本索引中，索引超出有效范围时会抛出 `IndexError` 异常：
    ```py
     >>> a
     [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
     >>> a[10]
     Traceback (most recent call last):
       File "<stdin>", line 1, in <module>
     IndexError: list index out of range
     >>> a[-11]
     Traceback (most recent call last):
       File "<stdin>", line 1, in <module>
     IndexError: list index out of range
    ```
    > 但在切片中**不是这样**，我们将在下文具体解释。
- > **简单切片**
  * > 简单切片指的是这样的切片形式：`a[start:stop]`，其行为是得到下标在这样一个**前闭后开区间**范围内的元素，其中 `start` 和 `stop` 为负数时，***简单看作是负数下标对应的位置***即可：
    ```py
     >>> a
     [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
     >>> a[2:3]
     [2]
     >>> a[5:9]
     [5, 6, 7, 8]
     >>> a[5:-1]
     [5, 6, 7, 8]
     >>> a[-5:9]
     [5, 6, 7, 8]
     >>> a[-5:-1]
     [5, 6, 7, 8]
    ```
    > 事情到这里也很简单，下面着重讲解两个比较特殊的情况：**超出有效索引范围**和**缺省**。
- > **超出有效索引范围**
  * > 当 `start` 或 `stop` 超出上文提到的有效索引范围​时，切片操作不会抛出异常，而是进行**截断**。可以这样去理解截断机制：我们假象把索引范围**扩充**到全体整数，只不过小于或大于的区域对应**空元素**，在这个扩充后的数轴上进行切片，只需把最终结果中的所有空元素忽略即可。
    ```py
     >>> a
     [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
     >>> a[-100:5]
     [0, 1, 2, 3, 4]
     >>> a[5:100]
     [5, 6, 7, 8, 9]
     >>> a[-100:100]
     [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
     >>> a[100:1000]
     []
    ```
    > 另外，如果 `start` 的位置比 `stop` 还靠后怎么办？Python还是不会抛出异常，而是直接返回空序列：
    ```py
     >>> a
     [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
     >>> a[6:5]
     []
    ```
- > **缺省**
  * > `start` 和 `stop` 都是可以缺省的，在缺省的情况下，Python的行为是**尽可能取最大区间**，具体来说：
  * > 按照扩充索引范围的观点，`start` 的缺省值是**无穷小()**，`stop` 的缺省值是**无穷大()**。
    ```py
     >>> a
     [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
     >>> a[:5]
     [0, 1, 2, 3, 4]
     >>> a[5:]
     [5, 6, 7, 8, 9]
     >>> a[100:]
     []
    ```
- > **扩展切片**
  * > 早期的Python解释器仅支持上述 `a[start:stop]` 形式的基本切片，后来加入了下面要介绍的切片形式，***扩展切片***的名称也流传下来，实际上不用担心，这早已是Python所支持的标准语法。
  * > 扩展切片指的是这样的切片形式：`a[start:stop:step]`，其中 `step` 是一个非零整数，即比简单切片多了调整**步长**的功能，此时切片的行为可概括为：从 `start` 对应的位置出发，以 `step` 为步长索引序列，直至越过 `stop` 对应的位置，且不包括 `stop` 本身。事实上，简单切片就是 `step=1` 的扩展切片的特殊情况。需要详细解释的是 `step` 分别为正数和负数的两种情况。
  * > **`step` 为正数**
    + > 当 `step` 为正数时，切片行为很容易理解，`start` 和 `stop` 的**截断**和**缺省**规则也与简单切片完全一致：
      ```py
      >>> a
      [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
      >>> a[0:6:2]
      [0, 2, 4]
      >>> a[::2]
      [0, 2, 4, 6, 8]
      >>> a[:-2:2]
      [0, 2, 4, 6]
      >>> a[4::2]
      [4, 6, 8]
      ```
  * > **`step` 为负数**
    + > 当 `step` 为负数时，切片将其解释为从 `start` 出发以步长 `|step|` **逆序**索引序列，此时，`start` 和 `stop` 的**截断**依然遵循前述规则，但**缺省**发生一点变化，因为我们说过，在缺省的情况下，Python的行为是**尽可能取最大区间**，此时访问是**逆序**的，`start` 应尽量取大，`stop` 应尽量取小，才能保证区间最大，因此：
    + > 按照扩充索引范围的观点，`start` 的缺省值是**无穷大()**，stop的缺省值是**无穷小()**。
      ```py
       >>> a
       [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
       >>> a[5::-1]
       [5, 4, 3, 2, 1, 0]
       >>> a[:4:-2]
       [9, 7, 5]
       >>> a[::-1]
       [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
      ```

Python List Slicing https://www.geeksforgeeks.org/python-list-slicing/
