
# 2024.05

微软开源了操作系统，注释中藏着一个大秘密！ https://mp.weixin.qq.com/s/-N38xZ1go8_dUpkQOTtcMw
- > **1**
  * > 美国华盛顿州的西雅图，有个叫西雅图计算机产品（简称SCP）公司决定采用Intel的8086来组装个人电脑，但是却没有合适的操作系统可用。
  * > 于是公司的`蒂姆·帕特森` (`Tim Paterson`)写了一个操作系统，名称叫做QDOS，意思是`Quick and Dirty Disk Operating System，Quick and Dirty`，这名称，公司竟然叫得出口。
  * > 1981年，盖茨抓住了一个千载难逢的机会：为蓝色巨人IBM的PC提供操作系统。
  * > 这时候的盖茨绝对是空手套白狼，他连操作系统都没有，就敢和IBM签合同。
  * > 微软和同在西雅图的SCP公司之前有业务往来，这时候盖茨就发现了QDOS，他非常果断，立刻用5万美元买断QDOS，并且把作者蒂姆·帕特森也挖了过来，让他把QDOS移植到配有8088 CPU的IBM PC上。
  * > 当然，不能叫QDOS这么难听的名字了，新名字叫MS-DOS。
  * > Mark Zbikowski在微软也是一个传奇程序员，他给DOS贡献了分层目录结构，和可安装设备驱动（后来成了即插即用），后来参与了Windows NT的开发，是文件系统架构师和开发经理。
  * > ***就像PK把自己的名字雕刻在Zip文件格式中一样，`Mark Zbikowski` 也把自己的名字刻在了DOS可执行文件里，这种文件的Magic Number是：`4D 5A` ，即`MZ`***。
- > **2**
  * > 如果不是有个叫OwnedByWuigi用户手快，fork了最早发布的DOS4.0代码仓库，我们可能永远都不知道有这回事儿。 https://github.com/OwnedByWuigi/DOS/blob/ffd70f8b4fb77e2e6affbf1fad2fd8c349f0369f/v4.0/src/DOS/STRIN.ASM#L70 
  * > 程序员经常在代码注释中看到脏话，比如：
- 回复：
  * > 那段代码截图的意思，是先比较一下AL寄存器和ctrl-F的值，'F'-'@'就是计算ctrl-F。如果相等则跳转到GETCH，我猜是从键盘获取一个字符。注解是说，TP忽略ctrl-F，因为他的BIOS可能没有清除（后面我猜是cache，就是键盘缓冲区）。 <br> 我猜测是CTRL-F是某个热键可以跳转到某段处理程序，BIOS应该清除键盘缓冲以免后续程序处理多余的CTRL-F，但是兼容机的BIOS是逆向工程的，也许有些兼容机没有清除缓冲，因此要加这段清理缓冲的判断。GETCH就是从键盘缓冲区取一个字符，达到从缓冲删除CTRL-F的目的。不过他没有用CALL而是JZ，GETCH可能不是函数而是一段不同的逻辑
