
# 09

腾讯面试官问：如何用 1GB 内存去重 40亿 QQ号？答案竟然是... https://mp.weixin.qq.com/s/02Oiyu5Xe2qLTbSXH1R4_g
- > 解决方案一：位图（Bitmap）方法
- > 解决方案二：使用布隆过滤器

# 01

二十年铸就信赖：GBase 8s数据库创新发展之道 https://mp.weixin.qq.com/s/SqYBQ0EV99s5kdEpFZqb5A
- > `GBASE南大通用`作为国产数据库领域的关键厂商，其首款通过安全可靠测评的事务型数据库GBase 8s是国产数据库创新发展的代表产品。近期，我们与GBASE南大通用`GBase 8s`产品部部长郭茁进行了线上直播交流，讨论了GBase 8s发展历程、用户需求与选型、未来规划等相关问题。
- > **多版本并发控制**
  * > 多版本并发控制(MVCC)在很多数据库产品上已经成为了提高并发性的基础能力，***GBase 8s目前使用`悲观锁`机制来实现该能力。MVCC的机制在`读多写少`的场景下并发性会更好，处理能力会更强，GBase 8s未来会通过MVCC技术更好地利用NUMA架构下的最大算力***。

国产数据库崛起正当时，2024年数据库风云回顾 https://mp.weixin.qq.com/s/qvIL1F-1NSOs7d3pzq622Q
- > **在数据安全领域**，随着国家对数据安全愈发重视，数据库内置安全能力成为标配，包括数据传输、数据存储、安全使用等三方面为代表。多款数据库都通过最高等级的安全认证。

只因把 https 改成 http，带宽减少了 70%！ https://mp.weixin.qq.com/s/OwAGT-ppR51QYTHCLlyu5g
- > **起因**
  * > 是一个高并发的采集服务上线后，100m的上行很快就被打满了。
  * > 因为这是一条专线，并且只有这一个服务在使用，所以可以确定就是它导致的。
  * > 但是这个请求只是一个 GET 请求，同时并没有很大的请求体，这是为什么呢？
  * > 于是使用 `charles` 重新抓包后发现，一个 request 的请求居然要占用 1.68kb 的大小!
  * > 其中 `TLS Handshake` 就占了 1.27kb。
  * > 这种情况下，需要的上行带宽就是：`1.68*20000/1024*8=262.5mbps`
  * > 也就说明 `100mbps` 的上行为何被轻松打满
- > **`TLS Handshake` 是什么来头，竟然如此大?**
  * > 首先要知道 `HTTPS` 全称是：`HTTP over TLS`，***每次建立新的TCP连接通常需要进行一次完整的 `TLS Handshake`。在握手过程中，客户端和服务器需要交换证书、公钥、加密算法等信息，这些数据占用了较多的字节数***。
  * > 因此想到最粗暴的解决方案也比较简单，就是直接使用 HTTP，省去 `TLS Handshake` 的过程，那么自然就不会有 TLS 的传输了。
- > **那么问题来了**
  * > 如果接口必须使用 https 那怎么办呢?
  * > 当然还有另外一个解决方案，那就使用使用 `Keep-Alive`。
  * > headers 中添加 `Connection: keep-alive` 即可食用。
  * > ***通过启用 `Keep-Alive`，可以在同一TCP连接上发送多个HTTPS请求，而无需每次都进行完整的 `TLS Handshake`，但第一次握手时仍然需要传输证书和完成密钥交换***。
  * > 对于高并发的场景也非常适用。
- > **要注意的是**
  * > `keep-alive` 是有超时时间的，超过时间连接会被关闭，再次请求需要重新建立链接。
  * > Nginx 默认的 `keep-alive` 超时是 75 秒，Apache HTTP 服务器 通常默认的 `keep-alive` 超时是 5 秒。ps：如果你的采集程序使用了大量的代理 ip 那么 `keep-alive` 的效果并不明显～～最好的还是使用 http
