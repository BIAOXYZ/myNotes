
最近各家服务崩的此起彼伏，到底是不是跟裁员有关？ https://www.v2ex.com/t/996703
- > 我感觉有关系，可能每个事件具体到细节上，都不一定是因为某个大佬被裁了导致出现的问题。但是大规模的事件，就类似航空业，经济低迷的时候，航空安全相对来说就是更容易出现事故是一样的。最起码往前推三四年，我个人印象中没有大厂接连的出现如此规模的服务宕机。
- > 当年携程网挂的时候，我学到了要用自己的电脑办公。直到了自己离职的时候，发现原来以前所爱的公司也就那么个鸟样。所以该留的东西要留一手，不搞破坏就不错了。。。 <br> ***有些东西没有经验的人是搞不清楚为什么，是什么会导致这种故障，特别还是 1+2 两个问题出现才会出现的故障***。再说了工作交接谁给你那么细的经验，密码交出去就好，其他的自己搜索去。。。
- > 白鹿原上的地主都知道，秋天收割麦子的几个月，必须给麦客吃饱饭，才能保证自家的收成 <br> 麦客和程序员都是吃的力气饭，可当前的老板明显不如以前的地主良心了
- > 业务复杂度演化到一定程度自然会涌现出这些问题。之前互联网高歌猛进的时候，更多的是新开项目攻城略地，现在各家都砍了新业务，聚焦现有业务做效率提升和功能演化。而复杂度的增加是指数型的，也就是说初期和线性无异，到了某个阈值就会跃迁呈现出远超预期的指数复杂度。
- > 你说滴滴 k8s 1.12 用的好好的，干嘛吃饱了升到 1.2 ？？？换我做决策我是能不升级就不升级，实在不行我再升级，而且就老业务用老的，新业务才用新的。跑的好好的干嘛去动啊。
  >> k8s 中间件，云原生部门也有开发的啊。不升级系统，市面上的新技术，k8s 的新特性用不了，人家也交不了差。就像你也不可能用一辈子的 centos 6 吧？
- > 我就在其中某个厂。肯定没直接关系，但是和经常裁员的管理模式关系很大。 <br> ***如果一个员工没有在一个岗位稳定工作的预期，那么他的所有的工作结果只会对当前一个季度负责。那么构建在所有人的这种自发的想法的基础上的系统上去聊稳定性，就是痴人说梦***
- > ***<ins>不光人在裁，机器也在裁啊，降本，机器资源，集群资源</ins>***，然后在降本的时候发现某些东西很老，有隐患，然后又想冲一波考核，那就拿出来升升级，然后发现，哦豁，没考虑到那么全面，因为最了解的人走了，现在都是看看文档的人，自然就崩一下，你要说解决不了，那不可能，只是因为没遇到所以才出问题，遇到了后面就不出了，然后后面又裁，新的问题再暴露。
- > 肯定有关系啊，但不会影响什么。人总是相信自己相信的话，“裁员了崩溃了——你看，惹程序员没有好下场”。***实际上这点问题跟裁员取得收益相比，仍然不会影响一点老板的想法***。
- > 不敢想象当时一线的工程师修复的时候压力有多大
- > 现在系统越来越复杂, 发生问题是必然的 <br> 想要不出问题, 你需要花很多精力在“预防”上, 比如定期评估测试发布/回滚流程, 进行灾备演练, 随机给某个机房断网断电什么的 <br> ***如果上头只看直接的成果, 对这些优化根本就不会在意, 下面的人自然也很少会去动它***, 毕竟这就和对现有的程序做重构与性能优化一样, 性价比特别低
- > 一定是有关系的，不一定是把干活的人裁了，也有可能是把本来打杂的裁了 现在杂事、大事、小事 都压在几个人身上了，人难免忙中出乱的
- > 如果是非常熟悉的，按照大厂的情况，哪怕出事故 30 分钟内也能够处理完成。如果几个小时，甚至十几个小时，肯定是不熟悉或者知道一部分的人接手，然后找各个参与过一些的人问，问着问着发现这个离职了，那个知道点，然后再和代码、日志核对，拿不准尝试修复，因为有些代码细节不了解，比如某个 if 可能是处理历史遗留问题数据的，没处理，又炸了，反复几次好不容易修好。
- > 绝对有关，离职交接其实是一笔烂账。有时候你会发现，一些小的功能，看起来不是很重要，但是离职交接没人管，可能就会出大事。最近在公司内部碰到离职交接后，无人看护的服务。
- > 我觉得是有关系的，楼上有人说了 经常裁员 势必会引起自保，那就是代码和人有一个能跑的心态。另外，***从 0 到 1 的人优化了，交接可不会从 0 到 1***，这中间的坑小还好说，大了就容易出事。
- > 有没有可能是国产化？

# 开源

原来 Linux 代码也有公司利益、政治斗争。 https://www.v2ex.com/t/1024652
```console
https://www.zhihu.com/question/648215689/answer/3432678754

关于新闻“Linux 6.9 将移除旧版 NTFS 驱动程序”，答主高志刚说了他和旧版 NTFS 驱动的维护者的故事，简单说就是他提出了改进这个残缺的旧版 NTFS 驱动的补丁。先是被怀疑动机，最后被无视。
答主最后对新闻作出评论“外行人看是优化了三万行代码，我看就是为了优化掉他这个支线 maintainer 。”
```

# BUG

敢不敢说说你曾经写过那些地动山摇的 BUG？ https://www.v2ex.com/t/994763

《地下城与勇士》修复了一个近 10 年的 BUG，我以为这是正常的设定，原来特么是个 BUG https://www.v2ex.com/t/932089

# 奇技淫巧（奇葩经历）

【:star: `*`】 你们在实际业务中都见过哪些好玩的数据？ https://www.v2ex.com/t/1049560
- > 用户的手机型号，iphone 占了一半
  >> 跟楼上相反，消费电子类，公众号粉丝。iphone 这两年占比明显从 20% 下降到 15%，前几年占比有 25%。
  >>> 公众号后题还能看到手机型号？？
  >>>> 我这边用户客群是汽车相关消费，我印象中几年前的数据，iPhone 11 有 30 万。
- > 用户平均支付时间 30s
- > ***线下相亲市场，`大龄女：大龄男=9：1`*** <br> ***相亲软件上，`80%`用户来自女生，付费基本上都来自女生，特别是越高端的相亲付费，女的付费越多***
  >> #8 社会风气对女要求样貌，对男要求事业，事业随年龄增长进步，样貌随年龄增长变差。同龄男性会越来越看不上同龄女性，倾向找更年轻女性
  >>> #8 这比例可能是因为对女的筛选要求不高，男的有车有房之类的硬性条件才有资格通过
- > 两个生产服务器之间有 30s 时差算不算
- > ***用户数 iPhone:Android 1:5,但是付费数 iPhone:Android 3:1***
- > 内部系统有个舔狗同事给另几个女同事发站内信，系统管理员或者直接登数据库都能看到明文
  >> 哈哈哈太社死了
- > ***客户买的成人用品发到 `坎大哈` 军事基地***
- > ***女性发涩图的比例很高，<ins>远超一半</ins>，很多是那种男性看了都觉得受不鸟的涩图***。
- > 一个我做的我觉得非常 SB 的功能 , 按一个按钮, 然后放一个小动画的功能 一天能赚 1w 左右.
- > ***想起 17 年在哈根达斯兼职。晚上统计一整天的单子发现微信支付比支付宝支付每单均价高 `5-10 元`***。
- > 洗数据时看到某彩礼名省：
  ```console
  男方买房加女方姓名的已婚比例比较高
  男方买房但面积比较小的有很多未婚且只有他们自己名字
  男方买房但只有女性名的有很多未婚
  男方有好多房产的，几乎不存在加女方名的情况，且很多都已婚
  ```
  >> CPU 烧了 未婚男买房但只有女名是啥情况。。
  >>> 被洗房了，就是女方以结婚为由要求过户给自己做为保障否则不结婚，然后男方过户给女方后，女方立马离婚或者干脆婚都没结
  >>>> 哎 婚姻
- > 客户下单，我们系统的 bug ，从客户的信用卡里扣如 150 英镑成功，内部业务处理异常，然后重复继续扣客户的钱，扣了 100 多次客户的额度不够了扣款失败。***这个 bug 存在了几年不重写模块解决不了，每次发生都是把钱还给客户就没事了***。
- > 楼上挺多讲的挺有意思，但是属于保密数据，希望不要被爬网线。我讲个真事吧，国内某大型平台，用户投诉老被人莫名其妙 @到，检查发现有两个用户名完全一样，不知道哪代研发写脏的数据… 问用户愿不愿意自己改个名，回答否，然后不了了之了
- > 学校公开接口能逐个扫出全校所有人的姓名、学院、学号、**证号、手机号、住址等信息
- > 好多年前的事了，印象深刻 <br> 在市场调查公司做分析，一次啤酒市场调查，有个样本数据极度异常，单个样本就占了全部样本 20%的总量（但最近的量又很低，接近 0 ），后来去问调查员，那个人是酒鬼，一天喝几十瓶啤酒，然后调查的一周前去看医生，医生警告他不能再喝了，要戒酒，连家人都出动严查他喝酒，所以调查临近的几天接近 0…… <br> 但基于这个样本是真实有效的，市调原则是不能以个人主观感觉排除真实数据，所以公司最终决定做两份报告交给客户，并做详细说明，其中一份排除该样本只用其他样本统计
- > 搜索关键词 top ，全是色情词，国内外皆如此
  >> 毕竟第一生产力（
- > 用户名密码最多的是 123456 和 654321
- > 我们后台 oa 没加太严谨的校验 导致两个问题
  1. 预约会议室是 7 天内, 但是可以直接通过接口预约超过 7 天的
  2. 已完结流程无法继续编辑,但是可以通过 F12 把按钮的 disable 删除掉继续编辑
- > 一个 web 版的小工具，其中一个功能需要付费使用，F12 把提醒支付的 div 删掉就可以正常使用该功能
- > 近几年股市韭菜女性占大多数
- > 前几年给我们市排名第一高中做报名系统，录取的学生，50%父母不是老师就是公务员或单位领导，剩下的大部分是做生意的，父母务农的极少。
- > 你们这些都没啥意思, 我接过律所的项目, 只接离婚官司的那种, 贼有意思了, ***那么证据视频照片开始直接把存储桶干封了***, 聊天记录也劲爆的一批

分享在职业生涯中遇到那些让人瞠目结舌的奇技淫巧 https://www.v2ex.com/t/1033147
- > 某项目合作方把图片的 base64 存到了数据库里。
  >> 这个不稀奇吧，好多项目都这样干！
  >>> 二进制文件存数据库不是问题，有问题是为啥要转一次 base64,白白增大了空间占用，处理还不方便
  >>>> 其实真要关系数据库里存图片的花，有 binary 类型的数据库系统可以直接存原始数据，没必要编码成 ascii-compatible
- > 一个非常牛逼的，VTK 在 C++项目代码里有个文件，是一个已经初始化好的静态数组，内容看起来是一些乱码。但实际上它是个字体文件的二进制，后续也是直接当字体用的。当时年幼的我第一次见这种操作，把二进制资源直接当字符硬编码到代码里。
  >> 这算什么，见没见过 oracle 的安装“脚本”，你以为它是个.sh ，其实只有一点点 shell ，其余的就是个二进制可执行文件
  >>> https://github.com/megastep/makeself <br> 那你有没有见过把数据结构定义文件编译成二进制静态数组的编译器（其实相当熟悉）： https://github.com/v2fly/v2ray-core/blob/c7459b30e454ecda4c392429c7409ea19a2384cf/app/tun/config.pb.go#L151-L209
- > 把用户的账号密码通过 API 读到 App 端，在端上做登录校验
  >> 看了这么多还是你这个牛批
- > 之前有个需求要做谷歌那边的爬虫，为了解决验证码识别买了个第三方服务。我一开始以为他们好牛逼用什么什么技术能破解验证码而且成功率相当之高，后来发现就是雇了好多人一天 24 小时坐在电脑前，人工解决后再将结果回传。真就是大道至简
  >> “人工”智能

# 信创

吐槽一下国产银河麒麟系统 https://www.v2ex.com/t/1048414
```console
海光的 CPU ，装的银河麒麟桌面系统 V10 （ SP1 ）
- 简单的 python 项目，pyinstaller 打包成可执行程序后，打开后巨慢，等一分钟多出现主窗口。
- 即使测试最简单 tkinter 的一个主窗口，打包后再打开也是巨慢。
- 慢也就罢了，应用程序拿到另外一台同样配置的机器上，很多元素都不能正常显示。
```
- > 这个 kylinV10 SP1 是基于 openEuler 做的，所以锅大概率还是菊花厂的
- > 我是用的统信操作系统，随手 apt 更新了一下，然后安装了 GCC 一条龙啥的，重启后机器就启动不起来了。。。后来就把电脑恢复了，现在只办公用。
- > 你可能不了解信创，政府央企国企以及合作公司用的都要求只能在信创名单内，不然不批不采购。。现在严重到非研发岗位新添置的电脑都要是国产电脑国产系统了。。
- > 刚适配完银河麒麟 V10 SP2 ，可能是 x86 的原因吧，没什么特别的问题，装上 docker 和 k8s 后，其它就忽略了。适配信创硬件的话，难度可能要大一些。 <br> 国产操作系统调研起来比较头大，种类多、版本多、血缘关系乱，能清晰的找到上游发行版，了解基本的维护逻辑就方便很多了。
- > 我司在用统信，感觉还行吧
- > 我用过 deepin 体验倒是很不错，CPU: I54590 ，M.2 固态
- > 这个我有经验，在 ARM 麒麟上跑个 Java 服务启动要 1 分钟以上，在 X86 下 8 秒，反正有这个东西存在，可以更好的摸鱼
- > 之前收到一个安全扫描报告，要修复 runc 的 cve ， 好家伙 runc 官方的用不了，得去麒麟他发布的修复版本。

某五百强信创数据库运维幽默记录 https://www.v2ex.com/t/1035840
```console
某五百强信创数据库，为了搭配他们的 arm 硬件，把物理安装的配置需求设计得十分严格，核数内存比 1:8 ，至少 8C 起步，否则安装检查不通过。
（但是容器化模式下允许 4C16G 安装）

一个集群 3 节点，也就是每个 cluster 至少要吃掉 24C192GB 内存，我们这边 base 的机器资源不够，调动用外地的机器，两地之间网络全隔离，需要开单申请端口放行
开始之前，我问某五百强技术支持，我们网络隔离，完成任务 1 需要开通什么端口
技术支持丢给我一个《端口矩阵》，林林总总列出了所有组件的端口接近 100 个，但是没告诉我是干什么用的，说可以参考这个文档
...
...
...
查 log 两小时，发现这个子任务试图让 node 终端请求 controller 的 Kafka 来获取一些任务参数，这个端口当然是没开通的，哥们，你是个数据库啊
反馈技术支持，追问，你们任务 2 要什么端口
技术支持进入了已读不回状态
```
- > 数据库还用到了 kafka ？
- > 为啥不敢说公司名称 我不能理解
  >> 五百强，信创数据库，同时卖 arm 机器，内存要求高 接触过的已经能够知道是哪家了
- > 魔改 PG ，越改越垃圾。
- > 五百强+信创数据库+arm ，应该是华为的高斯数据库吧
- > 你还是太年轻，我们给甲方部署系统，第一条要求就是网络全开，后面上线后再收紧访问面，因为就是你这种坑踩得太多了。。。尤其是阿里系的东西，一言难尽
- > arm 的 aarch64 64k pagesize 可能 是一个原因
- > 特有的客户当孙子，信创，腐败的温床。
  >> 我只能说确实挣钱,这孙子不白当.. 有专门的信创拨款
- > 那卖的是产品吗？卖的是人情世故。虽然觉得这些软件恶心。
- > 某几家的产品，说是信创数据库，其实是基于 pgxl 架构改出来的缝合产物，还自带运维平台，不是通常意义上的单纯数据库。所以不但有 kafka ，甚至还可能有 redis ，zookeeper ，es 等等一堆东西。
  >> kafka 作为收集事件流和日志的。查了 gaussdb 的文档，果然要求 ssh, ping 一堆端口 https://support.huawei.com/enterprise/en/doc/EDOC1100345160?currentPartNo=k001&togo=content
- > 看了一半就知道是高斯了，这玩意我们 SRE 用起来简直难受到炸
- > 扯吧，我们这边拿到的端口矩阵很多都是大段范围，完全不说明具体细节，问它们研发它们自己都搞不明白，一个数据库为什么要开那么多端口

交付过信创产品，或者被信创蹂躏过的兄弟们，让我解脱吧 https://www.v2ex.com/t/1013618

各位被信创折磨的程序员们，你们有用 GaussDB 的吗 https://www.v2ex.com/t/1013406
- > 如果是分布式版的高斯，注意用对分布列、尽量不要用全局唯一索引、尽量不要用复制表，被这三个点坑挺惨的
- > XC 下尽量不要用 MariaDB ，有些问题导致需要升级数据库的，无解，只能从其他渠道解决。。。
- > 碰到过一次 oracle 转 高斯 DB ，然后这张表有说有十几亿数据，换完之后查询就崩了，数据量太多直接走全局了，这个是我们对接其他项目组 他们给我们提供的 SQL 。
- > 就是 postgres ，但是他用的 postgres 的版本太老了，很多特性不支持，比如 on duplicate 就不支持，很难用。
  >> on duplicate 不是 mysql 方言么，pg 最新版本支持了？...你是否想说 ON CONFLICT
  >>> 对 ON CONFLICT 。。

# 其他

写一句你所知的计算机界名言名句。 https://www.v2ex.com/t/1017108
- > Software is like sex, it's better when it's free. -Linus Torvalds
- > Rule 34, If it exists, there is porn of it – no exceptions 算么
- > Across the Great Wall, we can reach every corner in the world”（越过长城，走向世界每个角落）
- > 永远不要低估一辆装满磁带在高速公路上飞驰的小货车的传输带宽。 —— 安德鲁·谭宁邦（ Andrew Tanenbaum ，1981 ）
